<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sticky Header with Mobile Menu</title>
    <!-- Link to your local Tailwind CSS minified file -->
    <link href="tailwind.min.css" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Ensure header is sticky */
        header {
            position: sticky;
            top: 0;
            z-index: 50;
            transition: all 0.3s ease;
        }

        /* Hide first nav on scroll */
        .scrolled .first-nav {
            display: none;
        }

        /* Adjust header background when scrolled */
        .scrolled {
            background-color: white;
        }

        /* Dropdown styling */
        .dropdown:hover .dropdown-menu {
            display: block;
        }

        /* Mobile menu styles */
        #mobile-menu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            position: relative;
            z-index: 50;
        }

        #mobile-menu.open {
            max-height: 1000px; /* Adjust as needed for content height */
        }

        /* Submenu for mobile (tap to toggle) */
        .mobile-submenu {
            display: none;
        }

        .mobile-dropdown.active .mobile-submenu {
            display: block;
        }

        /* Overlay for mobile menu */
        #overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 40;
            transition: opacity 0.3s ease;
        }

        #overlay.open {
            display: block;
            opacity: 1;
        }

        /* Search bar styles */
        #search-bar {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            width: 100%;
            background-color: white;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            z-index: 60;
        }

        #search-bar.open {
            display: block;
        }
    </style>
</head>
<body>
    <header class="w-full font-sans bg-white">
        <!-- Div 1: First Navigation (hidden on mobile) -->
        <div class="first-nav bg-gray-100 border-b border-gray-200 w-full hidden md:block">
            <nav class="py-2 px-4">
                <ul class="flex justify-end space-x-6">
                    <li>
                        <a href="#" class="text-gray-700 text-xs hover:text-teal-800 flex items-center">
                            <i class="fas fa-leaf mr-1"></i>Sustainability
                        </a>
                    </li>
                    <li>
                        <a href="#" class="text-gray-700 text-xs hover:text-teal-800 flex items-center">
                            <i class="fas fa-briefcase mr-1"></i>Career
                        </a>
                    </li>
                    <li>
                        <a href="#" class="text-gray-700 text-xs hover:text-teal-800 flex items-center">
                            <i class="fas fa-newspaper mr-1"></i>Media Hub
                        </a>
                    </li>
                </ul>
            </nav>
        </div>

        <!-- Div 2: Logo, Navigation, and Search Icon -->
        <div class="second-nav flex items-center justify-between w-full px-4 py-2">
            <!-- Hamburger Menu Icon (visible on mobile) -->
            <div class="md:hidden">
                <button id="menu-toggle" class="text-gray-700 text-2xl">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <!-- Logo (centered on mobile) -->
            <div class="flex-grow md:flex-grow-0 md:pt-1 text-center md:text-left">
                <a href="#">
                    <img src="./images/logo.webp" alt="MiPet Services Logo" class="ml-0 object-contain h-4 max-w-[50px] sm:h-6 sm:max-w-[100px] md:h-8 md:max-w-[120px] lg:h-10 lg:max-w-[150px] inline" />
                </a>
            </div>

            <!-- Flex grow to push nav and search to the right on desktop -->
            <div class="hidden md:block flex-grow"></div>

            <!-- Desktop Navigation (hidden on mobile, closer to search) -->
            <nav class="py-2 hidden md:flex items-center">
                <ul class="flex space-x-4">
                    <li><a href="#" class="text-gray-700 text-base hover:text-teal-800">Home</a></li>
                    <!-- About Us Dropdown -->
                    <li class="relative dropdown">
                        <a href="#" class="text-gray-700 text-base hover:text-teal-800 flex items-center">
                            About Us <i class="fas fa-chevron-down ml-1"></i>
                        </a>
                        <ul class="dropdown-menu hidden absolute bg-white shadow-md mt-2 py-2 w-48">
                            <li><a href="#" class="block px-4 py-2 text-gray-700 text-sm hover:bg-teal-800 hover:text-white">Who We Are</a></li>
                            <li><a href="#" class="block px-4 py-2 text-gray-700 text-sm hover:bg-teal-800 hover:text-white">What We Do</a></li>
                            <li><a href="#" class="block px-4 py-2 text-gray-700 text-sm hover:bg-teal-800 hover:text-white">Why Choose Us</a></li>
                            <li><a href="#" class="block px-4 py-2 text-gray-700 text-sm hover:bg-teal-800 hover:text-white">Our Values</a></li>
                        </ul>
                    </li>
                    <!-- Our Services Dropdown -->
                    <li class="relative dropdown">
                        <a href="#" class="text-gray-700 text-base hover:text-teal-800 flex items-center">
                            Our Services <i class="fas fa-chevron-down ml-1"></i>
                        </a>
                        <ul class="dropdown-menu hidden absolute bg-white shadow-md mt-2 py-2 w-48">
                            <li><a href="#" class="block px-4 py-2 text-gray-700 text-sm hover:bg-teal-800 hover:text-white">Upstream Services</a></li>
                            <li><a href="#" class="block px-4 py-2 text-gray-700 text-sm hover:bg-teal-800 hover:text-white">Midstream Services</a></li>
                            <li><a href="#" class="block px-4 py-2 text-gray-700 text-sm hover:bg-teal-800 hover:text-white">Downstream Services</a></li>
                            <li><a href="#" class="block px-4 py-2 text-gray-700 text-sm hover:bg-teal-800 hover:text-white">Infrastructure</a></li>
                            <li><a href="#" class="block px-4 py-2 text-gray-700 text-sm hover:bg-teal-800 hover:text-white">Public Sector</a></li>
                        </ul>
                    </li>
                    <li><a href="#" class="text-gray-700 text-base hover:text-teal-800">Contact Us</a></li>
                    <li><a href="#" class="text-gray-700 text-base hover:text-teal-800">Careers</a></li>
                </ul>
            </nav>

            <!-- Search Icon (Square, no radius) -->
            <button id="search-toggle" class="bg-blue-900 flex items-center justify-center h-10 w-10 ml-2">
                <i class="fas fa-search text-white text-lg"></i>
            </button>
        </div>

        <!-- Search Bar (hidden by default) -->
        <div id="search-bar" class="md:w-auto md:right-0">
            <input type="text" placeholder="Search..." class="w-full p-2 border border-gray-300 rounded">
        </div>

        <!-- Mobile Menu (hidden by default, slides down) -->
        <div id="mobile-menu" class="md:hidden bg-white shadow-md">
            <!-- First Nav Items (shaded gray) -->
            <div class="bg-gray-100 py-2 px-4">
                <ul class="flex flex-col space-y-2">
                    <li>
                        <a href="#" class="text-gray-700 text-sm hover:text-teal-800 flex items-center">
                            <i class="fas fa-leaf mr-1"></i>Sustainability
                        </a>
                    </li>
                    <li>
                        <a href="#" class="text-gray-700 text-sm hover:text-teal-800 flex items-center">
                            <i class="fas fa-briefcase mr-1"></i>Career
                        </a>
                    </li>
                    <li>
                        <a href="#" class="text-gray-700 text-sm hover:text-teal-800 flex items-center">
                            <i class="fas fa-newspaper mr-1"></i>Media Hub
                        </a>
                    </li>
                </ul>
            </div>
            <!-- Separator Line -->
            <hr class="border-gray-200">
            <!-- Second Nav Items -->
            <ul class="flex flex-col space-y-2 px-4 py-2">
                <li><a href="#" class="text-gray-700 text-base hover:text-teal-800">Home</a></li>
                <!-- About Us Mobile Dropdown -->
                <li class="mobile-dropdown">
                    <a href="#" class="text-gray-700 text-base hover:text-teal-800 flex items-center justify-between" onclick="toggleSubmenu(this)">
                        About Us <i class="fas fa-chevron-down ml-1"></i>
                    </a>
                    <ul class="mobile-submenu pl-4 space-y-2">
                        <li><a href="#" class="block text-gray-700 text-sm hover:text-teal-800">Who We Are</a></li>
                        <li><a href="#" class="block text-gray-700 text-sm hover:text-teal-800">What We Do</a></li>
                        <li><a href="#" class="block text-gray-700 text-sm hover:text-teal-800">Why Choose Us</a></li>
                        <li><a href="#" class="block text-gray-700 text-sm hover:text-teal-800">Our Values</a></li>
                    </ul>
                </li>
                <!-- Our Services Mobile Dropdown -->
                <li class="mobile-dropdown">
                    <a href="#" class="text-gray-700 text-base hover:text-teal-800 flex items-center justify-between" onclick="toggleSubmenu(this)">
                        Our Services <i class="fas fa-chevron-down ml-1"></i>
                    </a>
                    <ul class="mobile-submenu pl-4 space-y-2">
                        <li><a href="#" class="block text-gray-700 text-sm hover:text-teal-800">Upstream Services</a></li>
                        <li><a href="#" class="block text-gray-700 text-sm hover:text-teal-800">Midstream Services</a></li>
                        <li><a href="#" class="block text-gray-700 text-sm hover:text-teal-800">Downstream Services</a></li>
                        <li><a href="#" class="block text-gray-700 text-sm hover:text-teal-800">Infrastructure</a></li>
                        <li><a href="#" class="block text-gray-700 text-sm hover:text-teal-800">Public Sector</a></li>
                    </ul>
                </li>
                <li><a href="#" class="text-gray-700 text-base hover:text-teal-800">Contact Us</a></li>
                <li><a href="#" class="text-gray-700 text-base hover:text-teal-800">Careers</a></li>
            </ul>
        </div>
    </header>

    <!-- Overlay for mobile menu -->
    <div id="overlay"></div>

    <!-- Sample content to enable scrolling -->
    <div class="h-[2000px] bg-gray-50"></div>

    <script>
        // JavaScript to handle scroll behavior
        window.addEventListener('scroll', function () {
            const header = document.querySelector('header');
            if (window.scrollY > 0) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        // Toggle mobile menu, overlay, and hamburger/X icon
        const menuToggle = document.getElementById('menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        const overlay = document.getElementById('overlay');
        const menuIcon = menuToggle.querySelector('i');

        function toggleMenu() {
            const isOpen = mobileMenu.classList.contains('open');
            if (isOpen) {
                mobileMenu.classList.remove('open');
                overlay.classList.remove('open');
                document.body.style.overflow = ''; // Restore scrolling
                menuIcon.classList.remove('fa-times');
                menuIcon.classList.add('fa-bars');
            } else {
                mobileMenu.classList.add('open');
                overlay.classList.add('open');
                document.body.style.overflow = 'hidden'; // Prevent scrolling
                menuIcon.classList.remove('fa-bars');
                menuIcon.classList.add('fa-times');
            }
        }

        menuToggle.addEventListener('click', toggleMenu);
        overlay.addEventListener('click', toggleMenu);

        // Toggle submenus in mobile
        function toggleSubmenu(element) {
            const parent = element.parentElement;
            parent.classList.toggle('active');
            const icon = element.querySelector('i');
            icon.classList.toggle('fa-chevron-down');
            icon.classList.toggle('fa-chevron-up');
        }

        // Toggle search bar
        const searchToggle = document.getElementById('search-toggle');
        const searchBar = document.getElementById('search-bar');

        searchToggle.addEventListener('click', function(event) {
            event.stopPropagation();
            searchBar.classList.toggle('open');
        });

        // Close search bar on outside click
        document.addEventListener('click', function(event) {
            if (!searchBar.contains(event.target) && !searchToggle.contains(event.target)) {
                searchBar.classList.remove('open');
            }
        });
    </script>
</body>
</html>